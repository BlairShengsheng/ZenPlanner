import{a as P,c as De,b as Me,t as Le,l as Pe,u as M,d as S,e as k,r as o,j as e,N as $,R as Oe,F as _e,f as A,O as Ae,g as X,C as J,h as V,i as _,D as G,k as W,S as z,v as Q,s as Z,K as ee,T as te,P as se,m as ae,n as I,o as He,p as Fe,q as Ie,w as Re,x as Be,y as $e,z as Ke,A as qe,B as Ue}from"./vendor-704f0b3e.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const u of i)if(u.type==="childList")for(const m of u.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&n(m)}).observe(document,{childList:!0,subtree:!0});function a(i){const u={};return i.integrity&&(u.integrity=i.integrity),i.referrerPolicy&&(u.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?u.credentials="include":i.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function n(i){if(i.ep)return;i.ep=!0;const u=a(i);fetch(i.href,u)}})();const ne="session/setUser",re="session/removeUser",K=t=>({type:ne,payload:t}),Ye=()=>({type:re}),Xe=()=>async t=>{const s=await fetch("/api/auth/");if(s.ok){const a=await s.json();if(a.errors)return;t(K(a))}},F=t=>async s=>{const a=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(a.ok){const n=await a.json();s(K(n))}else return a.status<500?await a.json():{server:"Something went wrong. Please try again"}},ie=t=>async s=>{const a=await fetch("/api/auth/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(a.ok){const n=await a.json();s(K(n))}else return a.status<500?await a.json():{server:"Something went wrong. Please try again"}},Je=()=>async t=>{await fetch("/api/auth/logout"),t(Ye())},Ve={user:null};function Ge(t=Ve,s){switch(s.type){case ne:return{...t,user:s.payload};case re:return{...t,user:null};default:return t}}//! --------------------------------------------------------------------
//! --------------------------------------------------------------------
const oe="tasks/SET_ALL_TASKS",le="tasks/SET_TASK",ce="tasks/CREATE_TASK",de="tasks/EDIT_TASK",ue="tasks/DELETE_TASK";//! --------------------------------------------------------------------
//! --------------------------------------------------------------------
const We=t=>({type:oe,payload:t}),ze=t=>({type:le,payload:t}),Qe=t=>({type:ce,payload:t}),Ze=t=>({type:de,payload:t}),et=t=>({type:ue,payload:t});//! --------------------------------------------------------------------
//! --------------------------------------------------------------------
const E=()=>async t=>{try{const s=await fetch("/api/tasks/");if(s.ok){const a=await s.json();Array.isArray(a)?t(We(a)):console.error("Expected array of tasks but gotf:",a)}else{const a=await s.json();console.error("Error fetching tasks",a)}}catch(s){console.error("Network error:",s)}},tt=t=>async s=>{const a=await fetch(`/api/tasks/${t}`);if(a.ok){const n=await a.json();console.log("API Response:",n),s(ze(n))}else return console.error("Error fetching a task"),{error:"Something went wrong when fetching a task data"}},st=t=>async s=>{const a=await fetch("/api/tasks/",{method:"POST",headers:{"Content-Type":"application/json","XSRF-TOKEN":P.get("XSRF-TOKEN")},body:JSON.stringify(t),credentials:"include"});if(a.ok){const n=await a.json();return console.log("Created task:",n),await s(Qe(n)),await s(E()),n}else return{error:(await a.json()).message||"Something went wrong when fetching all the tasks data"}},at=t=>async s=>{const a=await fetch(`/api/tasks/${t.id}`,{method:"PUT",headers:{"Content-Type":"application/json","XSRF-TOKEN":P.get("XSRF-TOKEN")},body:JSON.stringify(t),credentials:"include"});if(a.ok){const n=await a.json();return s(Ze(n)),s(E()),n}else return console.error("Error editing a task"),{error:"Something went wrong when updating a task"}},nt=t=>async s=>{if((await fetch(`/api/tasks/${t}`,{method:"DELETE"})).ok)s(et(t)),s(E());else return console.error("Error deleting a task"),{error:"Something went wrong when deleting a task"}};//! --------------------------------------------------------------------
//! --------------------------------------------------------------------
const rt={allTasks:{},singleTask:{}},it=(t=rt,s)=>{switch(s.type){case oe:{const a={...t,allTasks:{...t.allTasks}};return s.payload.forEach(n=>{a.allTasks[n.id]=n}),a}case le:return{...t,singleTask:s.payload};case ce:return{...t,allTasks:{...t.allTasks,[s.payload.id]:s.payload},singleTask:s.payload};case de:return{...t,allTasks:{...t.allTasks,[s.payload.id]:s.payload}};case ue:{const a={...t};return delete a.allTasks[s.payload],a}default:return t}};//! --------------------------------------------------------------------
//! --------------------------------------------------------------------
const me="habits/SET_ALL_HABITS",he="habits/SET_HABIT",pe="habits/CREATE_HABIT",xe="habits/EDIT_HABIT",je="habits/DELETE_HABIT";//! --------------------------------------------------------------------
//! --------------------------------------------------------------------
const ot=t=>({type:me,payload:t}),lt=t=>({type:he,payload:t}),ct=t=>({type:pe,payload:t}),dt=t=>({type:xe,payload:t}),ut=t=>({type:je,payload:t});//! --------------------------------------------------------------------
//! --------------------------------------------------------------------
const D=()=>async t=>{try{const s=await fetch("/api/habits/");if(s.ok){const a=await s.json();Array.isArray(a)?t(ot(a)):console.error("Expected array of habits but got:",a)}else{const a=await s.json();console.error("Error fetching habits",a)}}catch(s){console.error("Network error:",s)}},mt=t=>async s=>{const a=await fetch(`/api/habits/${t}`);if(a.ok){const n=await a.json();console.log("API Response:",n),s(lt(n))}else return console.error("Error fetching a habit"),{error:"Something went wrong when fetching habit data"}},ht=t=>async s=>{const a=await fetch("/api/habits/",{method:"POST",headers:{"Content-Type":"application/json","XSRF-TOKEN":P.get("XSRF-TOKEN")},body:JSON.stringify(t),credentials:"include"});if(a.ok){const n=await a.json();return console.log("Created habit:",n),await s(ct(n)),await s(D()),n}else return{error:(await a.json()).message||"Something went wrong when creating the habit"}},pt=t=>async s=>{const a=await fetch(`/api/habits/${t.id}`,{method:"PUT",headers:{"Content-Type":"application/json","XSRF-TOKEN":P.get("XSRF-TOKEN")},body:JSON.stringify(t),credentials:"include"});if(a.ok){const n=await a.json();return s(dt(n)),s(D()),n}else return console.error("Error editing a habit"),{error:"Something went wrong when updating a habit"}},xt=t=>async s=>{if((await fetch(`/api/habits/${t}`,{method:"DELETE",headers:{"XSRF-TOKEN":P.get("XSRF-TOKEN")},credentials:"include"})).ok)s(ut(t)),s(D());else return console.error("Error deleting a habit"),{error:"Something went wrong when deleting a habit"}};//! --------------------------------------------------------------------
//! --------------------------------------------------------------------
const jt={allHabits:{},singleHabit:{}},gt=(t=jt,s)=>{switch(s.type){case me:{const a={...t,allHabits:{...t.allHabits}};return s.payload.forEach(n=>{a.allHabits[n.id]=n}),a}case he:return{...t,singleHabit:s.payload};case pe:return{...t,allHabits:{...t.allHabits,[s.payload.id]:s.payload},singleHabit:s.payload};case xe:return{...t,allHabits:{...t.allHabits,[s.payload.id]:s.payload}};case je:{const a={...t};return delete a.allHabits[s.payload],a}default:return t}};//! --------------------------------------------------------------------
//! --------------------------------------------------------------------
const ge="timeblocks/SET_ALL_TIMEBLOCKS",fe="timeblocks/SET_TIMEBLOCK",be="timeblocks/CREATE_TIMEBLOCK",ye="timeblocks/EDIT_TIMEBLOCK",we="timeblocks/DELETE_TIMEBLOCK";//! --------------------------------------------------------------------
//! --------------------------------------------------------------------
const ft=t=>({type:ge,payload:t}),bt=t=>({type:fe,payload:t}),yt=t=>({type:be,payload:t}),wt=t=>({type:ye,payload:t}),vt=t=>({type:we,payload:t});//! --------------------------------------------------------------------
//! --------------------------------------------------------------------
const N=()=>async t=>{try{const s=await fetch("/api/timeblocks/");if(s.ok){const a=await s.json();Array.isArray(a)?t(ft(a)):console.error("Expected array of timeblocks but got:",a)}else{const a=await s.json();console.error("Error fetching timeblocks",a)}}catch(s){console.error("Network error:",s)}},St=t=>async s=>{try{const a=await fetch(`/api/timeblocks/${t}`);if(a.ok){const n=await a.json();s(bt(n))}else return console.error("Error fetching a timeblock"),{error:"Something went wrong when fetching timeblock data"}}catch(a){return console.error("Network error:",a),{error:"Network error occurred"}}},ve=t=>async s=>{try{const a=await fetch("/api/timeblocks/",{method:"POST",headers:{"Content-Type":"application/json","XSRF-TOKEN":P.get("XSRF-TOKEN")},body:JSON.stringify(t),credentials:"include"});if(a.ok){const n=await a.json();return console.log("Created timeblock:",n),await s(yt(n)),await s(N()),n}else return{error:(await a.json()).message||"Something went wrong when creating the timeblock"}}catch(a){return console.error("Network error:",a),{error:"Network error occurred"}}},B=t=>async s=>{try{const a=await fetch(`/api/timeblocks/${t.id}`,{method:"PUT",headers:{"Content-Type":"application/json","XSRF-TOKEN":P.get("XSRF-TOKEN")},body:JSON.stringify(t),credentials:"include"});if(a.ok){const n=await a.json();return s(wt(n)),s(N()),n}else return console.error("Error editing timeblock"),{error:"Something went wrong when updating the timeblock"}}catch(a){return console.error("Network error:",a),{error:"Network error occurred"}}},Se=t=>async s=>{try{return(await fetch(`/api/timeblocks/${t}`,{method:"DELETE",headers:{"XSRF-TOKEN":P.get("XSRF-TOKEN")},credentials:"include"})).ok?(s(vt(t)),s(N()),{message:"Timeblock deleted successfully"}):(console.error("Error deleting timeblock"),{error:"Something went wrong when deleting the timeblock"})}catch(a){return console.error("Network error:",a),{error:"Network error occurred"}}};//! --------------------------------------------------------------------
//! --------------------------------------------------------------------
const Tt={allTimeblocks:{},singleTimeblock:{}},kt=(t=Tt,s)=>{switch(s.type){case ge:{const a={...t,allTimeblocks:{...t.allTimeblocks}};return s.payload.forEach(n=>{a.allTimeblocks[n.id]=n}),a}case fe:return{...t,singleTimeblock:s.payload};case be:return{...t,allTimeblocks:{...t.allTimeblocks,[s.payload.id]:s.payload},singleTimeblock:s.payload};case ye:return{...t,allTimeblocks:{...t.allTimeblocks,[s.payload.id]:s.payload}};case we:{const a={...t};return delete a.allTimeblocks[s.payload],a}default:return t}},Nt=De({session:Ge,tasks:it,habits:gt,timeblocks:kt});let Te;Te=Me(Le);const Ct=t=>Pe(Nt,t,Te);function Et(){const t=M(),s=S(),a=k(p=>p.session.user),[n,i]=o.useState(""),[u,m]=o.useState(""),[d,j]=o.useState({});if(a)return e.jsx($,{to:"/",replace:!0});const r=async p=>{p.preventDefault(),await s(F({email:"demo@aa.io",password:"password"})),await t("/")},l=async p=>{p.preventDefault();const x=await s(F({email:n,password:u}));x?j(x):t("/")};return e.jsx("div",{className:"page-container",children:e.jsxs("div",{className:"log-in-container",children:[e.jsx("h1",{children:"Log In"}),d.length>0&&d.map(p=>e.jsx("p",{children:p},p)),e.jsxs("form",{onSubmit:l,children:[e.jsxs("label",{children:["Email",e.jsx("input",{type:"text",value:n,placeholder:"Please enter your email......",onChange:p=>i(p.target.value),required:!0})]}),d.email&&e.jsx("p",{children:d.email}),e.jsxs("label",{children:["Password",e.jsx("input",{type:"password",value:u,placeholder:"Please enter your password......",onChange:p=>m(p.target.value),required:!0})]}),d.password&&e.jsx("p",{children:d.password}),e.jsxs("div",{className:"action-buttons",children:[e.jsx("button",{type:"submit",children:"Log In"}),e.jsx("button",{type:"button",onClick:r,children:"Demo Login"})]})]})]})})}function Dt(){const t=S(),s=M(),a=k(c=>c.session.user),[n,i]=o.useState(""),[u,m]=o.useState(""),[d,j]=o.useState(""),[r,l]=o.useState(""),[p,x]=o.useState({});if(a)return e.jsx($,{to:"/",replace:!0});const b=async c=>{if(c.preventDefault(),d!==r)return x({confirmPassword:"Confirm Password field must be the same as the Password field"});const h=await t(ie({email:n,username:u,password:d}));h?x(h):s("/")};return e.jsxs(e.Fragment,{children:[e.jsx("h1",{children:"Sign Up"}),p.server&&e.jsx("p",{children:p.server}),e.jsxs("form",{onSubmit:b,children:[e.jsxs("label",{children:["Email",e.jsx("input",{type:"text",value:n,onChange:c=>i(c.target.value),required:!0})]}),p.email&&e.jsx("p",{children:p.email}),e.jsxs("label",{children:["Username",e.jsx("input",{type:"text",value:u,onChange:c=>m(c.target.value),required:!0})]}),p.username&&e.jsx("p",{children:p.username}),e.jsxs("label",{children:["Password",e.jsx("input",{type:"password",value:d,onChange:c=>j(c.target.value),required:!0})]}),p.password&&e.jsx("p",{children:p.password}),e.jsxs("label",{children:["Confirm Password",e.jsx("input",{type:"password",value:r,onChange:c=>l(c.target.value),required:!0})]}),p.confirmPassword&&e.jsx("p",{children:p.confirmPassword}),e.jsx("button",{type:"submit",children:"Sign Up"})]})]})}const q=o.createContext();function Mt({children:t}){const s=o.useRef(),[a,n]=o.useState(null),[i,u]=o.useState(null),d={modalRef:s,modalContent:a,setModalContent:n,setOnModalClose:u,closeModal:()=>{n(null),typeof i=="function"&&(u(null),i())}};return e.jsxs(e.Fragment,{children:[e.jsx(q.Provider,{value:d,children:t}),e.jsx("div",{ref:s})]})}function Lt(){const{modalRef:t,modalContent:s,closeModal:a}=o.useContext(q);return!t||!t.current||!s?null:Oe.createPortal(e.jsxs("div",{id:"modal",children:[e.jsx("div",{id:"modal-background",onClick:a}),e.jsx("div",{id:"modal-content",children:s})]}),t.current)}const U=()=>o.useContext(q);function Y({modalComponent:t,itemText:s,onItemClick:a,onModalClose:n}){const{setModalContent:i,setOnModalClose:u}=U(),m=()=>{n&&u(n),i(t),typeof a=="function"&&a()};return e.jsx("li",{onClick:m,children:s})}function Pt(){const t=S();let[s,a]=o.useState(""),[n,i]=o.useState("");const[u,m]=o.useState({}),{closeModal:d}=U(),j=async l=>{l.preventDefault();const p=await t(F({email:s,password:n}));p?m(p):d()},r=async l=>{l.preventDefault(),a("demo@aa.io"),i("password");const p=await t(F({email:"demo@aa.io",password:"password"}));p?m(p):d()};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"login-modal",children:[e.jsx("h1",{children:"Log In"}),e.jsxs("form",{onSubmit:j,children:[e.jsxs("label",{children:["Email",e.jsx("input",{type:"text",value:s,onChange:l=>a(l.target.value),required:!0})]}),u.email&&e.jsx("p",{children:u.email}),e.jsxs("label",{children:["Password",e.jsx("input",{type:"password",value:n,onChange:l=>i(l.target.value),required:!0})]}),u.password&&e.jsx("p",{children:u.password}),e.jsx("button",{type:"submit",onClick:j,children:"Log In"}),e.jsx("button",{type:"button",onClick:r,children:"Log In as Demo User"})]})]})})}function Ot(){const t=S(),[s,a]=o.useState(""),[n,i]=o.useState(""),[u,m]=o.useState(""),[d,j]=o.useState(""),[r,l]=o.useState({}),{closeModal:p}=U(),x=async b=>{if(b.preventDefault(),u!==d)return l({confirmPassword:"Confirm Password field must be the same as the Password field"});const c=await t(ie({email:s,username:n,password:u}));c?l(c):p()};return e.jsxs("div",{className:"signup-modal",children:[e.jsx("h1",{children:"Sign Up"}),r.server&&e.jsx("p",{children:r.server}),e.jsxs("form",{onSubmit:x,children:[e.jsxs("label",{children:["Email",e.jsx("input",{type:"text",value:s,onChange:b=>a(b.target.value),required:!0})]}),r.email&&e.jsx("p",{children:r.email}),e.jsxs("label",{children:["Username",e.jsx("input",{type:"text",value:n,onChange:b=>i(b.target.value),required:!0})]}),r.username&&e.jsx("p",{children:r.username}),e.jsxs("label",{children:["Password",e.jsx("input",{type:"password",value:u,onChange:b=>m(b.target.value),required:!0})]}),r.password&&e.jsx("p",{children:r.password}),e.jsxs("label",{children:["Confirm Password",e.jsx("input",{type:"password",value:d,onChange:b=>j(b.target.value),required:!0})]}),r.confirmPassword&&e.jsx("p",{children:r.confirmPassword}),e.jsx("button",{type:"submit",children:"Sign Up"})]})]})}function _t(){const t=S(),s=M(),[a,n]=o.useState(!1),i=k(r=>r.session.user),u=o.useRef(),m=r=>{r.stopPropagation(),n(!a)};o.useEffect(()=>{if(!a)return;const r=l=>{u.current&&!u.current.contains(l.target)&&n(!1)};return document.addEventListener("click",r),()=>document.removeEventListener("click",r)},[a]);const d=()=>n(!1),j=r=>{r.preventDefault(),t(Je()),d(),s("/")};return e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:m,children:e.jsx(_e,{})}),a&&e.jsx("ul",{className:"profile-dropdown",ref:u,children:i?e.jsxs(e.Fragment,{children:[e.jsx("li",{children:i.username}),e.jsx("li",{children:i.email}),e.jsx("li",{children:e.jsx("button",{onClick:j,children:"Log Out"})})]}):e.jsxs(e.Fragment,{children:[e.jsx(Y,{itemText:"Log In",onItemClick:d,modalComponent:e.jsx(Pt,{})}),e.jsx(Y,{itemText:"Sign Up",onItemClick:d,modalComponent:e.jsx(Ot,{})})]})})]})}function At(){const t=k(s=>s.session.user);return e.jsxs("div",{className:"wrapper",children:[e.jsxs("div",{className:"nav-link-area",children:[e.jsx(A,{to:"/",children:"Home"}),e.jsx("div",{className:"profile-button",children:e.jsx(_t,{})})]}),e.jsxs("div",{className:"nav-link-area-two",children:[e.jsx(A,{to:"/tasks/",children:"Tasks"}),e.jsx(A,{to:"/habits/",children:"Habits"}),e.jsx(A,{to:"/timeblocks/",children:"TimeBlocks"}),e.jsx(A,{to:"/",children:"HabitTracker"})]}),e.jsx("div",{className:"user-name",children:e.jsx("h2",{children:t?`Hello, I'm ${t.username}`:"Welcome!"})})]})}function Ht(){const t=S(),[s,a]=o.useState(!1);return o.useEffect(()=>{t(Xe()).then(()=>a(!0))},[t]),e.jsx(e.Fragment,{children:e.jsxs(Mt,{children:[e.jsx(At,{}),s&&e.jsx(Ae,{}),e.jsx(Lt,{})]})})}const Ft=({show:t,onConfirm:s,onCancel:a})=>t?e.jsx("div",{className:"modal-widow",children:e.jsxs("div",{className:"modal-content",children:[e.jsx("h2",{children:"Are you sure you want to delete this task?"}),e.jsxs("div",{className:"modal-buttons",children:[e.jsx("button",{onClick:s,className:"confirm-del-btn",children:"Yes, Delete"}),e.jsx("button",{onClick:a,className:"cancel-del-btn",children:"Cancel"})]})]})}):null,It=({show:t,onClose:s,todoData:a})=>{const n=S(),[i,u]=o.useState(""),[m,d]=o.useState(""),[j,r]=o.useState("low"),[l,p]=o.useState({}),[x,b]=o.useState(!1);o.useEffect(()=>{t&&a&&(u(a.name||""),d(a.description||""),r(a.priority||"low"),p({}),b(!1))},[t,a]);const c=async h=>{h.preventDefault(),b(!0);const y={};if(i.trim()||(y.name="Name is required"),m.trim()||(y.description="Description is required"),i.length>100&&(y.name="Task name cannot exceed 100 characters"),m.length>200&&(y.description="Description cannot exceed 200 characters"),p(y),Object.keys(y).length>0)return;const v={id:a.id,name:i,description:m,priority:j};try{const f=await n(at(v));f&&f.id&&(await n(E()),await n(tt(f.id)),s())}catch(f){console.error("Failed to edit Todo:",f)}};return t?e.jsx("div",{className:"modal-overlay",children:e.jsxs("div",{className:"modal-content",children:[e.jsx("h2",{children:"Update To Do List"}),e.jsx("div",{className:"form-container",children:e.jsxs("form",{onSubmit:c,children:[e.jsxs("label",{children:[e.jsx("h4",{children:"Task Name"}),e.jsx("input",{type:"text",value:i,onChange:h=>u(h.target.value),placeholder:"Task Name",className:x&&l.name?"error":""}),x&&l.name&&e.jsx("p",{className:"error-message",children:l.name})]}),e.jsxs("label",{children:[e.jsx("h4",{children:"Description"}),e.jsx("textarea",{id:"description-area",placeholder:"Please write about your task details...",value:m,onChange:h=>d(h.target.value),className:x&&l.description?"error":""}),x&&l.description&&e.jsx("p",{className:"error-message",children:l.description})]}),e.jsxs("div",{className:"priority-container",children:[e.jsx("label",{children:e.jsx("h4",{children:"Priority"})}),e.jsx("div",{className:"priority-options",children:["low","medium","high"].map(h=>e.jsxs("label",{className:"priority-label",children:[e.jsx("input",{type:"radio",name:"priority",value:h,checked:j===h,onChange:y=>r(y.target.value)}),e.jsx("span",{className:`priority-btn ${h}`,children:h})]},h))})]}),e.jsxs("div",{className:"modal-buttons",children:[e.jsx("button",{type:"submit",className:"confirm-update-btn",children:"Update"}),e.jsx("button",{type:"button",onClick:s,className:"cancel-update-btn",children:"Cancel"})]})]})})]})}):null},Rt=({isOpen:t,onClose:s})=>{const a=S(),[n,i]=o.useState(""),[u,m]=o.useState(""),[d,j]=o.useState("low"),[r,l]=o.useState({}),[p,x]=o.useState(!1),b=h=>{h.preventDefault(),j(h.target.value)},c=async h=>{h.preventDefault(),x(!0);const y={};if(n.trim()||(y.name="name is required"),u.trim()||(y.description="description is required"),n.length>100&&(y.name="Task name cannot exceed 100 characters"),u.length>200&&(y.description="Description cannot exceed 200 characters"),l(y),Object.keys(y).length>0)return;const v={name:n,description:u,priority:d};try{const f=await a(st(v));f&&f.id&&(await a(E()),i(""),m(""),j("low"),x(!1),s())}catch(f){console.error("Failed to create task:",f)}};return t?e.jsx("div",{className:"modal-overlay",onClick:h=>{h.target===h.currentTarget&&s()},children:e.jsxs("div",{className:"modal-content",children:[e.jsx("h2",{children:"Create a To Do Task"}),e.jsxs("form",{onSubmit:c,children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Task Name"}),e.jsx("input",{type:"text",value:n,onChange:h=>i(h.target.value),placeholder:"Task Name",className:p&&r.name?"form-input error":"form-input"}),p&&r.name&&e.jsx("p",{className:"error-message",children:r.name})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Description"}),e.jsx("textarea",{value:u,onChange:h=>m(h.target.value),placeholder:"Please write about your task details......",className:p&&r.description?"form-input error":"form-input",rows:4}),p&&r.description&&e.jsx("p",{className:"error-message",children:r.description})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Priority"}),e.jsxs("div",{className:"priority-options",children:[e.jsxs("label",{className:"priority-label",children:[e.jsx("input",{type:"radio",name:"priority",value:"low",checked:d==="low",onChange:b}),e.jsx("span",{className:"priority-btn low",children:"Low"})]}),e.jsxs("label",{className:"priority-label",children:[e.jsx("input",{type:"radio",name:"priority",value:"medium",checked:d==="medium",onChange:b}),e.jsx("span",{className:"priority-btn medium",children:"Medium"})]}),e.jsxs("label",{className:"priority-label",children:[e.jsx("input",{type:"radio",name:"priority",value:"high",checked:d==="high",onChange:b}),e.jsx("span",{className:"priority-btn high",children:"High"})]})]})]}),e.jsxs("div",{className:"button-group",children:[e.jsx("button",{type:"submit",className:"submit-btn",children:"Create Task"}),e.jsx("button",{type:"button",className:"cancel-btn",onClick:s,children:"Cancel"})]})]})]})}):null};const Bt=({todo:t,onUpdate:s,onDelete:a})=>{var b;const[n,i]=o.useState(!1),{attributes:u,listeners:m,setNodeRef:d,transform:j,transition:r,isDragging:l}=X({id:t.id,data:t}),p={transform:J.Transform.toString(j),transition:r,opacity:l?.5:1,cursor:"grab",touchAction:"none"},x=c=>{c.stopPropagation(),i(c.target.checked)};return e.jsxs("div",{ref:d,style:p,className:`todo-card-wrapper ${n?"completed":""}`,children:[e.jsx("div",{...u,...m,className:"drag-handle",children:"⋮⋮"}),e.jsx("input",{type:"checkbox",className:"checkbox",checked:n,onChange:x,onClick:c=>c.stopPropagation()}),e.jsx("div",{className:"todo-content",children:e.jsxs("div",{className:`todo-text ${n?"completed":""}`,children:[e.jsx("h3",{children:t.name}),e.jsx("p",{children:t.description}),e.jsx("span",{className:`priority-tag ${t.priority}`,children:(b=t.priority)==null?void 0:b.toUpperCase()})]})}),e.jsxs("div",{className:"action-button",children:[e.jsx("button",{type:"button",className:"update-btn",onClick:s,children:"Update"}),e.jsx("button",{type:"button",className:"delete-btn",onClick:a,children:"Delete"})]})]})};const ke=()=>{const t=S(),s=k(g=>g.session.user),a=k(g=>g.tasks.allTasks),[n,i]=o.useState([]),[u,m]=o.useState(!1),[d,j]=o.useState(!1),[r,l]=o.useState(null),[p,x]=o.useState(!0),[b,c]=o.useState(!1),h=V(_(se,{activationConstraint:{distance:8}}),_(te,{activationConstraint:{delay:200,tolerance:5}}),_(ee,{coordinateGetter:Z}));if(o.useEffect(()=>{(async()=>{x(!0);try{s&&await t(E())}catch(w){console.error("Error loading To Do List:",w)}finally{x(!1)}})()},[t,s]),o.useEffect(()=>{if(a){const g=Object.values(a).filter(w=>w&&w.user_id===(s==null?void 0:s.id));i(g)}},[a,s]),p)return e.jsx("div",{children:"Loading..."});if(!s)return e.jsx("div",{children:"Please log in to view your To Do Lists"});const y=(g,w)=>{w.stopPropagation(),l(g),j(!0)},v=(g,w)=>{w.stopPropagation(),l(g),m(!0)},f=g=>{const{active:w,over:T}=g;!T||w.id===T.id||i(C=>{const H=C.findIndex(O=>O.id===w.id),R=C.findIndex(O=>O.id===T.id);return ae(C,H,R)})};return e.jsxs("div",{className:"to-dos-page",children:[e.jsxs("h1",{children:["To Do List",e.jsx("button",{onClick:()=>c(!0),className:"add-todo-button",title:"Create a new To Do List",children:"add ✚"})]}),e.jsx(G,{sensors:h,onDragEnd:f,collisionDetection:W,children:e.jsx("div",{className:"to-dos-column",children:n.length>0?e.jsx(z,{items:n,strategy:Q,children:n.map(g=>e.jsx(Bt,{todo:g,onUpdate:w=>y(g,w),onDelete:w=>v(g,w)},g.id))}):e.jsx("p",{children:"No to dos found. Create a new to do list to get started!"})})}),e.jsx(Rt,{isOpen:b,onClose:()=>{c(!1),t(E())}}),e.jsx(It,{show:d,onClose:()=>{j(!1),l(null),t(E())},todoData:r}),e.jsx(Ft,{show:u,onConfirm:async()=>{try{r!=null&&r.id&&(await t(nt(r.id)),await t(E()))}finally{m(!1),l(null)}},onCancel:()=>{m(!1),l(null)}})]})};const $t=({onMonthSelect:t})=>{const[s,a]=o.useState(new Date().getFullYear()),n=["January","February","March","April","May","June","July","August","September","October","November","December"],i=j=>{a(r=>r+j)},u=(j,r)=>new Date(r,j+1,0).getDate(),m=(j,r)=>new Date(r,j,1).getDay(),d=j=>{const r=u(j,s),l=m(j,s),p=[];for(let x=0;x<l;x++)p.push(e.jsx("span",{className:"calendar-day empty"},`empty-${x}`));for(let x=1;x<=r;x++)p.push(e.jsx("span",{className:"calendar-day",onClick:b=>{b.stopPropagation(),t(new Date(s,j,x))},children:x},`day-${x}`));return p};return e.jsxs("div",{className:"minimal-calendar",children:[e.jsxs("div",{className:"calendar-header",children:[e.jsx("button",{className:"year-nav-button",onClick:()=>i(-1),children:"‹"}),e.jsxs("h1",{children:["CALENDAR ",s]}),e.jsx("button",{className:"year-nav-button",onClick:()=>i(1),children:"›"})]}),e.jsx("div",{className:"months-grid",children:n.map((j,r)=>e.jsxs("div",{className:"month-container",onClick:()=>t(new Date(s,r,1)),children:[e.jsx("h3",{className:"month-title",children:j}),e.jsxs("div",{className:"weekdays",children:[e.jsx("span",{children:"S"}),e.jsx("span",{children:"M"}),e.jsx("span",{children:"T"}),e.jsx("span",{children:"W"}),e.jsx("span",{children:"T"}),e.jsx("span",{children:"F"}),e.jsx("span",{children:"S"})]}),e.jsx("div",{className:"days-grid",children:d(r)})]},`${j}-${s}`))})]})};const Ne=({onDaySelect:t})=>{const s=M(),a=I(),[n,i]=o.useState(()=>{var h;const c=(h=a.state)==null?void 0:h.selectedDate;return c?typeof c=="string"?new Date(c):c:new Date}),u=["January","February","March","April","May","June","July","August","September","October","November","December"],m=["S","M","T","W","T","F","S"],d=c=>new Date(c.getFullYear(),c.getMonth()+1,0).getDate(),j=c=>new Date(c.getFullYear(),c.getMonth(),1).getDay(),r=()=>{i(new Date(n.getFullYear(),n.getMonth()-1))},l=()=>{i(new Date(n.getFullYear(),n.getMonth()+1))},p=c=>{t&&t(c),s("/combine",{state:{selectedDate:c.toISOString(),returnMonth:n}})},x=()=>{s("/",{state:{selectedDate:n}})},b=()=>{const c=d(n),h=j(n),y=[];for(let v=0;v<h;v++)y.push(e.jsx("div",{className:"calendar-cell empty"},`empty-${n.getMonth()}-${v}`));for(let v=1;v<=c;v++){const f=new Date(n.getFullYear(),n.getMonth(),v),g=new Date().toDateString()===f.toDateString();y.push(e.jsx("div",{className:`calendar-cell ${g?"today":""}`,onClick:()=>p(f),children:v},`day-${n.getMonth()}-${v}`))}return y};return e.jsxs("div",{className:"monthly-calendar",children:[e.jsx("div",{className:"calendar-navigation",children:e.jsx("button",{onClick:x,className:"back-button",children:"Back to Year View"})}),e.jsxs("div",{className:"calendar-header",children:[e.jsx("button",{onClick:r,className:"nav-button",children:"←"}),e.jsxs("h2",{children:[u[n.getMonth()].toUpperCase()," ",n.getFullYear()]}),e.jsx("button",{onClick:l,className:"nav-button",children:"→"})]}),e.jsxs("div",{className:"calendar-grid",children:[e.jsx("div",{className:"weekdays",children:m.map((c,h)=>e.jsx("div",{className:"weekday",children:c},`weekday-${h}`))}),e.jsx("div",{className:"days",children:b()})]})]})};const Kt=({isOpen:t,onClose:s,onSubmit:a,onDelete:n,timeblock:i,initialTimeSlot:u,error:m})=>{const[d,j]=o.useState({name:"",description:"",start_time:"",end_time:""}),r=c=>{if(!c)return"";const h=typeof c=="string"?new Date(c):c;return!(h instanceof Date)||isNaN(h)?"":h.toISOString().slice(0,16)},l=c=>{if(!c)return"";const h=new Date(c);if(isNaN(h.getTime()))return"";const y=h.getFullYear(),v=String(h.getMonth()+1).padStart(2,"0"),f=String(h.getDate()).padStart(2,"0"),g=String(h.getHours()).padStart(2,"0"),w=String(h.getMinutes()).padStart(2,"0"),T=String(h.getSeconds()).padStart(2,"0");return`${y}-${v}-${f} ${g}:${w}:${T}`};o.useEffect(()=>{i?j({name:i.name||"",description:i.description||"",start_time:r(i.start_time)||"",end_time:r(i.end_time)||""}):u&&j(c=>({...c,start_time:r(u.start_time),end_time:r(u.end_time)}))},[i,u]);const p=c=>{const{name:h,value:y}=c.target;j(v=>({...v,[h]:y}))},x=c=>{c.preventDefault();const h=new Date(d.start_time);if(new Date(d.end_time)<=h){alert("End time must be after start time");return}const v={...(i==null?void 0:i.id)&&{id:i.id},name:d.name.trim(),description:d.description.trim(),start_time:l(d.start_time),end_time:l(d.end_time)};a(v)},b=async()=>{i!=null&&i.id&&n&&window.confirm("Are you sure you want to delete this time block?")&&(await n(i.id),s())};return t?e.jsx("div",{className:"modal-overlay",onClick:c=>{c.target===c.currentTarget&&s()},children:e.jsxs("div",{className:"modal-content",children:[e.jsxs("h2",{children:[i?"Update":"Create"," Time Block"]}),m&&e.jsx("div",{className:"error-message",children:m}),e.jsxs("form",{onSubmit:x,children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"name",children:"Name:"}),e.jsx("input",{type:"text",id:"name",name:"name",value:d.name,onChange:p,required:!0,className:"form-input"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"description",children:"Description:"}),e.jsx("textarea",{id:"description",name:"description",value:d.description,onChange:p,required:!0,rows:4,className:"form-input"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"start_time",children:"Start Time:"}),e.jsx("input",{type:"datetime-local",id:"start_time",name:"start_time",value:d.start_time,onChange:p,required:!0,className:"form-input"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"end_time",children:"End Time:"}),e.jsx("input",{type:"datetime-local",id:"end_time",name:"end_time",value:d.end_time,onChange:p,required:!0,className:"form-input"})]}),e.jsxs("div",{className:"button-group",children:[e.jsx("button",{type:"submit",className:"submit-btn",children:i?"Update":"Create"}),i&&e.jsx("button",{type:"button",className:"delete-btn",onClick:b,children:"Delete"}),e.jsx("button",{type:"button",className:"cancel-btn",onClick:s,children:"Cancel"})]})]})]})}):null};const Ce=({selectedDate:t})=>{const s=S(),a=M(),n=k(f=>f.session.user),i=k(f=>f.timeblocks.allTimeblocks),[u,m]=o.useState(!1),[d,j]=o.useState(null),[r,l]=o.useState(""),p=f=>Object.values(f||{}).filter(g=>g&&g.user_id===(n==null?void 0:n.id)).map(g=>{const w=new Date(g.start_time.replace(" ","T")),T=new Date(g.end_time.replace(" ","T"));return{id:g.id.toString(),title:g.name,description:g.description,start:w,end:T}});o.useEffect(()=>{(async()=>{n&&await s(N())})()},[s,n]);const x=f=>{if(!n){alert("Please log in to create time blocks");return}j({start_time:f.start,end_time:f.end}),m(!0),f.view.calendar.unselect()},b=async f=>{const g={id:parseInt(f.event.id),name:f.event.title,description:f.event.extendedProps.description,start_time:f.event.start,end_time:f.event.end};try{await s(B(g)),await s(N())}catch{l("Failed to update time block")}},c=f=>{const g=f.event;window.confirm(`Do you want to edit "${g.title}"?
Click OK to edit, Cancel to delete`)?(j({id:parseInt(g.id),name:g.title,description:g.extendedProps.description,start_time:g.start,end_time:g.end}),m(!0)):window.confirm(`Are you sure you want to delete "${g.title}"?`)&&h(parseInt(g.id))},h=async f=>{try{await s(Se(f)),await s(N())}catch{l("Failed to delete time block")}},y=async f=>{try{f.id?await s(B(f)):await s(ve(f)),await s(N()),m(!1),l("")}catch{l("Failed to save time block")}},v=()=>{a("/monthly",{state:{selectedDate:t||new Date}})};return e.jsx("div",{className:"daily-scheduler",children:n?e.jsxs(e.Fragment,{children:[r&&e.jsx("div",{className:"error-banner",children:r}),e.jsx("div",{className:"calendar-navigation",children:e.jsx("button",{onClick:v,className:"back-button",children:"Back to Month View"})}),e.jsx(He,{plugins:[Fe,Ie],initialView:"timeGridDay",initialDate:t,headerToolbar:{left:"prev,next",center:"title",right:"timeGridDay"},slotMinTime:"05:00:00",slotMaxTime:"22:00:00",height:"auto",expandRows:!0,selectable:!0,selectMirror:!0,dayMaxEvents:!0,events:p(i),select:x,eventClick:c,eventChange:b,editable:!0,dragScroll:!0,dayHeaderFormat:{weekday:"long",month:"long",day:"numeric",year:"numeric"},allDaySlot:!1,slotDuration:"01:00:00",slotLabelInterval:"01:00:00",slotLabelFormat:{hour:"2-digit",minute:"2-digit",hour12:!1}}),u&&e.jsx(Kt,{isOpen:u,onClose:()=>{m(!1),l("")},onSubmit:y,onDelete:h,timeblock:d.id?d:null,initialTimeSlot:d.id?null:d,error:r})]}):e.jsx("div",{className:"login-warning",children:"Please log in to manage your time blocks"})})},qt=()=>{const t=M(),s=I(),[a,n]=o.useState(()=>{var d;const m=(d=s.state)==null?void 0:d.selectedDate;return m?new Date(m):new Date}),i=m=>{n(m),t("/monthly",{state:{selectedDate:m}})},u=m=>{n(m),t("/combine",{state:{selectedDate:m,returnMonth:m}})};return e.jsxs("div",{className:"calendar-container",children:[s.pathname==="/"&&e.jsx($t,{onMonthSelect:i}),s.pathname==="/monthly"&&e.jsx("div",{children:e.jsx(Ne,{initialDate:a,onDaySelect:u})}),s.pathname==="/combine"&&e.jsx("div",{children:e.jsx(Ce,{selectedDate:a})})]})};const Ut=({show:t,onConfirm:s,onCancel:a})=>t?e.jsx("div",{className:"modal-window",children:e.jsxs("div",{className:"modal-content",children:[e.jsx("h2",{children:"Are you sure you want to delete this habit?"}),e.jsxs("div",{className:"modal-buttons",children:[e.jsx("button",{onClick:s,className:"confirm-del-btn",children:"Yes,Delete"}),e.jsx("button",{onClick:a,className:"cancle-del-btn",children:"Cancel"})]})]})}):null,Yt=({show:t,onClose:s,habitData:a})=>{const n=S(),[i,u]=o.useState(""),[m,d]=o.useState(""),[j,r]=o.useState({}),[l,p]=o.useState(!1);o.useEffect(()=>{t&&a&&(u(a.name||""),d(a.description||""),r({}),p(!1))},[t,a]);const x=async b=>{b.preventDefault(),p(!0);let c={};if(i.trim()||(c.name="Name is required"),m.trim()||(c.description="Description is required"),r(c),Object.keys(c).length>0)return;const h={id:a.id,name:i,description:m};try{const y=await n(pt(h));y&&y.id&&(await n(D()),await n(mt(y.id)),s())}catch(y){console.log("Failed to edit Habit:",y)}};return t?e.jsx("div",{className:"modal-overlay",children:e.jsxs("div",{className:"modal-content",children:[e.jsx("h2",{children:"Update A Habit"}),e.jsx("div",{className:"form-container",children:e.jsxs("form",{onSubmit:x,children:[e.jsxs("label",{children:[e.jsx("h4",{children:"Habit Name"}),e.jsx("input",{type:"text",value:i,onChange:b=>u(b.target.value),placeholder:"Habit Name",className:l&&j.name?"error":""}),l&&j.name&&e.jsx("p",{className:"error-message",children:j.name})]}),e.jsxs("label",{children:[e.jsx("h4",{children:"Description"}),e.jsx("textarea",{id:"description-area",placeholder:"Please write about your habit detail...",value:m,onChange:b=>d(b.target.value),className:l&&j.description?"error":""}),l&&j.name&&e.jsx("p",{className:"error-message",children:j.name})]}),e.jsxs("div",{className:"modal-buttons",children:[e.jsx("button",{type:"submit",className:"confirm-update-btn",children:"Update"}),e.jsx("button",{type:"button",onClick:s,className:"cancel-update-btn",children:"Cancel"})]})]})})]})}):null};function Xt({isOpen:t,onClose:s}){const a=S(),[n,i]=o.useState(""),[u,m]=o.useState(""),[d,j]=o.useState({}),[r,l]=o.useState(!1),p=async x=>{x.preventDefault(),l(!0);const b={};if(n.trim()||(b.name="Name is required"),u.trim()||(b.description="Description is required"),j(b),Object.keys(b).length>0)return;const c={name:n.trim(),description:u.trim()};try{const h=await a(ht(c));h&&h.id&&(await a(D()),i(""),m(""),j({}),l(!1),s())}catch(h){console.error("Failed to create habit:",h),j({submit:"Failed to create habit. Please try again."})}};return t?e.jsx("div",{className:"modal-overlay",onClick:x=>{x.target===x.currentTarget&&s()},children:e.jsxs("div",{className:"modal-content",children:[e.jsx("h2",{children:"Create A Habit"}),e.jsx("div",{className:"form-container",children:e.jsxs("form",{onSubmit:p,children:[d.submit&&e.jsx("p",{className:"error-message",children:d.submit}),e.jsx("div",{className:"form-group",children:e.jsxs("label",{children:[e.jsx("h4",{children:"Habit Name"}),e.jsx("input",{type:"text",value:n,onChange:x=>i(x.target.value),placeholder:"Habit Name",className:r&&d.name?"error":""}),r&&d.name&&e.jsx("p",{className:"error-message",children:d.name})]})}),e.jsx("div",{className:"form-group",children:e.jsxs("label",{children:[e.jsx("h4",{children:"Description"}),e.jsx("textarea",{id:"description-area",placeholder:"Please write about your habit detail...",value:u,onChange:x=>m(x.target.value),className:r&&d.description?"error":""}),r&&d.description&&e.jsx("p",{className:"error-message",children:d.description})]})}),e.jsxs("div",{className:"modal-buttons",children:[e.jsx("button",{type:"submit",className:"confirm-create-btn",children:"Create"}),e.jsx("button",{type:"button",onClick:()=>{i(""),m(""),j({}),l(!1),s()},className:"cancel-create-btn",children:"Cancel"})]})]})})]})}):null}const Jt=({habit:t,onUpdate:s,onDelete:a})=>{const{attributes:n,listeners:i,setNodeRef:u,transform:m,transition:d,isDragging:j}=X({id:t.id}),r={transform:J.Transform.toString(m),transition:d,opacity:j?.5:1};return e.jsxs("div",{ref:u,style:r,className:"habit-item",children:[e.jsx("div",{...n,...i,className:"menu-dots",children:"⋮"}),e.jsx("input",{type:"checkbox",className:"checkbox",onClick:l=>l.stopPropagation()}),e.jsxs("div",{className:"habit-content",children:[e.jsx("div",{className:"habit-name",children:t.name}),e.jsx("div",{className:"habit-description",children:t.description})]}),e.jsxs("div",{className:"action-buttons",children:[e.jsx("button",{className:"update-btn",onClick:s,children:"Update"}),e.jsx("button",{className:"delete-btn",onClick:a,children:"Delete"})]})]})},Ee=()=>{const t=S(),s=k(g=>g.session.user),a=k(g=>g.habits.allHabits),[n,i]=o.useState([]),[u,m]=o.useState(!1),[d,j]=o.useState(!1),[r,l]=o.useState(null),[p,x]=o.useState(!0),[b,c]=o.useState(!1),h=V(_(se,{activationConstraint:{distance:8}}),_(te,{activationConstraint:{delay:200,tolerance:5}}),_(ee,{coordinateGetter:Z}));if(o.useEffect(()=>{(async()=>{x(!0);try{s&&await t(D())}catch(w){console.error("Error loading habit list:",w)}finally{x(!1)}})()},[t,s]),o.useEffect(()=>{if(a){const g=Object.values(a).filter(w=>w&&w.user_id===(s==null?void 0:s.id));i(g)}},[a,s]),p)return e.jsx("div",{children:"Loading..."});if(!s)return e.jsx("div",{children:"Please log in to view your Habit Lists"});const y=(g,w)=>{g.stopPropagation(),l(w),j(!0)},v=(g,w)=>{g.stopPropagation(),l(w),m(!0)},f=g=>{const{active:w,over:T}=g;!T||w.id===T.id||i(C=>{const H=C.findIndex(O=>O.id===w.id),R=C.findIndex(O=>O.id===T.id);return ae(C,H,R)})};return e.jsxs("div",{className:"habit-page",children:[e.jsxs("h1",{children:["Habit List",e.jsx("button",{onClick:()=>c(!0),className:"add-habit-button",title:"Create a new Habit List",children:"add ✚"})]}),e.jsx(G,{sensors:h,onDragEnd:f,collisionDetection:W,children:e.jsx("div",{className:"habits-column",children:n.length>0?e.jsx(z,{items:n.map(g=>g.id),strategy:Q,children:n.map(g=>e.jsx(Jt,{habit:g,onUpdate:w=>y(w,g),onDelete:w=>v(w,g)},g.id))}):e.jsx("p",{children:"No Habit Found. Create a new habit to get started!"})})}),e.jsx(Xt,{isOpen:b,onClose:()=>{c(!1),t(D())}}),e.jsx(Yt,{show:d,onClose:()=>{j(!1),l(null),t(D())},habitData:r}),e.jsx(Ut,{show:u,onConfirm:async()=>{try{r!=null&&r.id&&(await t(xt(r.id)),await t(D()))}finally{m(!1),l(null)}},onCancel:()=>{m(!1)}})]})};const Vt=()=>{var n;const t=I(),[s,a]=o.useState(((n=t.state)==null?void 0:n.selectedDate)||new Date);return o.useEffect(()=>{var i;(i=t.state)!=null&&i.selectedDate&&a(t.state.selectedDate)},[t.state]),e.jsxs("div",{className:"combined-page",children:[e.jsx("div",{className:"left-panel",children:e.jsx(Ce,{selectedDate:s})}),e.jsxs("div",{className:"right-panel",children:[e.jsxs("div",{className:"todo-section",children:[e.jsx("h2",{children:"Tasks"}),e.jsx(ke,{selectedDate:s})]}),e.jsxs("div",{className:"habit-section",children:[e.jsx("h2",{children:"Habits"}),e.jsx(Ee,{selectedDate:s})]})]})]})};const Gt=()=>{const t=S(),s=M(),a=k(r=>r.session.user),n=k(r=>r.timeblocks.allTimeblocks),i=Object.values(n||{}).filter(r=>r&&r.user_id===(a==null?void 0:a.id)),[u,m]=o.useState(!0);if(o.useEffect(()=>{(async()=>{m(!0);try{a&&await t(N())}catch(l){console.error("Error loading time block list:",l)}finally{m(!1)}})()},[t,a]),u)return e.jsx("div",{children:"Loading..."});if(!a)return e.jsx("div",{children:"Please log in to view your time block lists"});const d=async(r,l)=>{r.preventDefault(),r.stopPropagation(),s(`/timeblocks/${l}/edit`)},j=async(r,l)=>{r.preventDefault(),r.stopPropagation(),await t(Se(l)),await t(N())};return e.jsxs("div",{className:"timeblock-page",children:[e.jsx("h1",{children:"Time Block List"}),e.jsx("div",{className:"timeblocks-grid",children:i&&i.length>0?i.map((r,l)=>e.jsxs("div",{className:"timeblock-card-wrapper",children:[e.jsx("h3",{children:r.name}),e.jsx("p",{children:r.description}),e.jsxs("div",{className:"start-time-section",children:[e.jsx("h4",{children:"Start Time:"}),r.start_time]}),e.jsxs("div",{className:"end-time-section",children:[e.jsx("h4",{children:"End Time:"}),r.end_time]}),e.jsxs("div",{className:"action-buttons",children:[e.jsx("button",{className:"update-btn",onClick:p=>d(p,r.id),children:"Update"}),e.jsx("button",{className:"delete-btn",onClick:p=>j(p,j(p,r.id)),children:"Delete"})]})]},l)):e.jsx("p",{children:"No time blocks found. Create a new time block to get started!"})})]})};//! --------------------------------------------------------------------
//! --------------------------------------------------------------------
const Wt=()=>{const t=M(),s=S(),[a,n]=o.useState(""),[i,u]=o.useState(""),[m,d]=o.useState(""),[j,r]=o.useState(""),[l,p]=o.useState({}),[x,b]=o.useState(!1);//! --------------------------------------------------------------------
//! --------------------------------------------------------------------
o.useEffect(()=>()=>{n(""),u(""),d(""),r(""),p({}),b(!1)},[]);const c=async h=>{h.preventDefault(),b(!0);const y={};if(a.trim()||(y.name="Name is required"),i.trim()||(y.description="Description is required"),m.trim()||(y.startTime="Start Time is required"),j.trim()||(y.endTime="End Time is required"),p(y),Object.keys(y).length>0)return;const v=w=>new Date(w).toISOString().slice(0,19).replace("T"," "),f={name:a,description:i,start_time:v(m),end_time:v(j)};console.log("Sending timeblock data:",f);const g=await s(ve(f));g&&g.id&&(t("/timeblocks"),await s(N()))};//! --------------------------------------------------------------------
//! --------------------------------------------------------------------
return e.jsx("div",{className:"modal-overly",children:e.jsxs("div",{className:"modal-content",children:[e.jsx("h2",{children:"Create A Time Block"}),e.jsx("div",{className:"form-container",children:e.jsxs("form",{onSubmit:c,children:[e.jsxs("label",{children:[e.jsx("h4",{children:"Time Block Name"}),e.jsx("input",{type:"text",value:a,onChange:h=>n(h.target.value),placeholder:"Time Block Name",className:x&&l.name?"error":""}),x&&l.name&&e.jsx("p",{className:"error-message",children:l.name})]}),e.jsxs("label",{children:[e.jsx("h4",{children:"Description"}),e.jsx("input",{type:"text",value:i,onChange:h=>u(h.target.value),placeholder:"Please write the thing you need to do...",className:x&&l.description?"error":""}),x&&l.description&&e.jsx("p",{className:"error-message",children:l.description})]}),e.jsxs("label",{children:[e.jsx("h4",{children:"Start Time:"}),e.jsx("input",{type:"datetime-local",value:m,onChange:h=>d(h.target.value),className:x&&l.startTime?"error":""}),x&&l.startTime&&e.jsx("p",{className:"error-message",children:l.startTime})]}),e.jsxs("label",{children:[e.jsx("h4",{children:"End Time:"}),e.jsx("input",{type:"datetime-local",value:j,onChange:h=>r(h.target.value),className:x&&l.endTime?"error":""}),x&&l.endTime&&e.jsx("p",{className:"error-message",children:l.endTime})]}),e.jsxs("div",{className:"modal-buttons",children:[e.jsx("button",{type:"submit",className:"confirm-create-btn",children:"Create"}),e.jsx("button",{type:"button",onClick:()=>t("/timeblocks"),className:"cancel-create-btn",children:"Cancel"})]})]})})]})})};//! --------------------------------------------------------------------
//! --------------------------------------------------------------------
const zt=()=>{const{timeblockId:t}=Re(),s=M(),a=S(),n=k(v=>v.timeblocks.singleTimeblock),[i,u]=o.useState(""),[m,d]=o.useState(""),[j,r]=o.useState(""),[l,p]=o.useState(""),[x,b]=o.useState({}),[c,h]=o.useState(!1);//! --------------------------------------------------------------------
//! --------------------------------------------------------------------
o.useEffect(()=>{a(St(t))},[a,t]),o.useEffect(()=>{n&&(u(n.name||""),d(n.description||""),r(n.startTime||""),p(n.endTime||""),b({}),h(!1))},[n]);const y=async v=>{v.preventDefault(),h(!0);const f={};if(i.trim()||(f.name=" Name is required"),m.trim()||(f.description="Description is required"),j.trim()||(f.startTime="Start Time is required"),l.trim()||(f.endTime="End Time is required"),b(f),Object.keys(f).length>0)return;const g=C=>new Date(C).toISOString().slice(0,19).replace("T"," "),w={id:t,name:i,description:m,start_time:g(j),end_time:g(l)},T=await a(B(w));T&&T.id&&(s("/timeblocks"),await a(N()))};//! --------------------------------------------------------------------
//! --------------------------------------------------------------------
return e.jsx("div",{className:"modal-overly",children:e.jsxs("div",{className:"modal-content",children:[e.jsx("h2",{children:"Update A Time Block"}),e.jsx("div",{className:"form-container",children:e.jsxs("form",{onSubmit:y,children:[e.jsxs("label",{children:[e.jsx("h4",{children:"Time Block Name"}),e.jsx("input",{type:"text",value:i,onChange:v=>u(v.target.value),placeholder:"Time Block Name",className:c&&x.name?"error":""}),c&&x.name&&e.jsx("p",{className:"error-message",children:x.name})]}),e.jsxs("label",{children:[e.jsx("h4",{children:"Description"}),e.jsx("input",{type:"text",value:m,onChange:v=>d(v.target.value),placeholder:"Please write the thing you need to do...",className:c&&x.description?"error":""}),c&&x.description&&e.jsx("p",{className:"error-message",children:x.description})]}),e.jsxs("label",{children:[e.jsx("h4",{children:"Start Time:"}),e.jsx("input",{type:"datetime-local",value:j,onChange:v=>r(v.target.value),className:c&&x.startTime?"error":""}),c&&x.startTime&&e.jsx("p",{className:"error-message",children:x.startTime})]}),e.jsxs("label",{children:[e.jsx("h4",{children:"End Time:"}),e.jsx("input",{type:"datetime-local",value:l,onChange:v=>p(v.target.value),className:c&&x.endTime?"error":""}),c&&x.endTime&&e.jsx("p",{className:"error-message",children:x.endTime})]}),e.jsxs("div",{className:"modal-buttons",children:[e.jsx("button",{type:"submit",className:"confirm-create-btn",children:"Update"}),e.jsx("button",{type:"button",onClick:()=>s("/timeblocks"),className:"cancel-create-btn",children:"Cancel"})]})]})})]})})};function L({children:t}){const s=k(n=>n.session.user),a=I();return s?t:e.jsx($,{to:"/login",state:{from:a},replace:!0})}const Qt=Be([{element:e.jsx(Ht,{}),children:[{path:"/",element:e.jsx(L,{children:e.jsx(qt,{})})},{path:"monthly",element:e.jsx(L,{children:e.jsx(Ne,{})})},{path:"combine",element:e.jsx(L,{children:e.jsx(Vt,{})})},{path:"login",element:e.jsx(Et,{})},{path:"signup",element:e.jsx(Dt,{})},{path:"tasks/",element:e.jsx(L,{children:e.jsx(ke,{})})},{path:"habits/",element:e.jsx(L,{children:e.jsx(Ee,{})})},{path:"timeblocks/",element:e.jsx(L,{children:e.jsx(Gt,{})})},{path:"timeblocks/new",element:e.jsx(L,{children:e.jsx(Wt,{})})},{path:"timeblocks/:timeblockId/edit",element:e.jsx(L,{children:e.jsx(zt,{})})}]}]);const Zt=Ct();$e.createRoot(document.getElementById("root")).render(e.jsx(Ke.StrictMode,{children:e.jsx(qe,{store:Zt,children:e.jsx(Ue,{router:Qt})})}));
